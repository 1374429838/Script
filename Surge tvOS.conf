[General]
# ✰以"#" ";" 和 "//" 开头的行为注释行
# ✰具体配置请参考Surge使用手册 https://manual.nssurge.com
# > HTTP-API
http-api = MuTukey@0.0.0.0:6171
# > 日志等级
loglevel = notify
# > 跳过代理
skip-proxy = 239.255.255.250/32, 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 17.0.0.0/8, localhost, *.local, *.crashlytics.com
# > VIF Excluded Routes
# tun-excluded-routes = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12 , 239.255.255.250/32
# > VIF Included Routes
# tun-included-routes = 192.168.1.12/32
# > Always Real IP Hosts
always-real-ip = *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com
# Hijack DNS
# hijack-dns = 8.8.8.8:53, 8.8.4.4:53
# > 允许 Wi-Fi 访问macOS
http-listen = 0.0.0.0:8888
socks5-listen = 0.0.0.0:8889
# > 允许 Wi-Fi 访问iOS
allow-wifi-access = false
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
# > Internet 测试 URL
internet-test-url = http://www.aliyun.com
# > 代理测速 URL
proxy-test-url = http://cp.cloudflare.com/generate_204
# > 测试超时（秒）
test-timeout = 5
# > 排除简单主机名
exclude-simple-hostnames = true
# > IPv6 支持
ipv6 = false
# > 当遇到 REJECT 策略时返回错误页
show-error-page-for-reject = true
# > Wi-Fi 不是主接口则使用SSID组的默认策略
use-default-policy-if-wifi-not-primary = false
# > 增强版 Wi-Fi 助理
wifi-assist = false
# > DNS 服务器
dns-server = 223.5.5.5, 114.114.114.114, 119.29.29.29
# encrypted-dns-server = https://dns.alidns.com/dns-query //OpenClash接管设备需注释（油管DNS冲突）
# > etc/hosts 读取 DNS 记录
read-etc-hosts = true
# > 路由防火墙
# 包含所有的网络请求
include-all-networks = false
# 包含本地网络请求
include-local-networks = false
# > 自定义 GeoIP 数据库
geoip-maxmind-url = https://cdn.jsdelivr.net/gh/Hackl0us/GeoIP2-CN@release/Country.mmdb
# > GeoIP 禁用自动更新
disable-geoip-db-auto-update = false
# > UDP IP 防泄漏
udp-policy-not-supported-behaviour = REJECT
# > HTTP-API-TLS
http-api-tls = false
# > Web 控制器
http-api-web-dashboard = true
# > 隐藏 VPN 图标
hide-vpn-icon = false
# > All Hybrid 网络并发
# all-hybrid = false
# > 网络优化
compatibility-mode = 1
# > 允许个人热点使用代理
allow-hotspot-access = false
# > 代理请求本地DNS映射
use-local-host-item-for-proxy = true
# > 提高处理 UDP 流量优先级
udp-priority = true

[Proxy]
# Cloudflare
WARP = wireguard, section-name=Cloudflare, test-url=http://cp.cloudflare.com/generate_204
WARP+ = wireguard, section-name=Cloudflare, underlying-proxy=Singapore, test-url=http://cp.cloudflare.com/generate_204

[Proxy Group]
# > 自定义策略
# 代理选择
PROXY = select, AUTO, Select, WARP, Hong Kong, Taiwan, Singapore, United States, Japan, no-alert=0, hidden=0, include-all-proxies=0
# 可用性选择
AUTO = url-test, policy-path=https://gist.githubusercontent.com/githubdulong/6c83f0472b3d3bb700064426e7f2ffcf/raw/tvOS, update-interval=43200, no-alert=0, hidden=1, include-all-proxies=0, policy-regex-filter=港 IPLC|IEPL|x1.5
# 手动选择
Select = select, include-other-group="Singapore, Hong Kong, Taiwan, United States", update-interval=43200, no-alert=0, hidden=0, include-all-proxies=0, policy-regex-filter=x1.5|IEPL|IPLC|甲
# 奈飞
Netflix = select, include-other-group="Singapore, Hong Kong, Taiwan", update-interval=43200, no-alert=0, hidden=0, include-all-proxies=0, policy-regex-filter=台湾|狮|新
# 迪士尼
Disney+ = select, include-other-group="Singapore, Hong Kong", update-interval=43200, no-alert=0, hidden=0, include-all-proxies=0, policy-regex-filter=狮|新|港
# 油管
YouTube = select, DIRECT, PROXY, Hong Kong, Taiwan, Singapore, United States, no-alert=0, hidden=0, include-all-proxies=0
# Spotify
Spotify = select, DIRECT, PROXY, Hong Kong, Taiwan, Singapore, United States, no-alert=0, hidden=0, include-all-proxies=0
# 苹果
Apple = select, DIRECT, PROXY, Hong Kong, Taiwan, Singapore, United States, no-alert=0, hidden=0, include-all-proxies=0
# Ponte 策略
Ponte = select, DIRECT, DEVICE:MuTu-ATV, no-alert=0, hidden=0, include-all-proxies=0
# 香港
Hong Kong = url-test, policy-path=https://gist.githubusercontent.com/githubdulong/6c83f0472b3d3bb700064426e7f2ffcf/raw/tvOS, policy-regex-filter=港, update-interval=43200, no-alert=0, hidden=1, include-all-proxies=0
# 台湾
Taiwan = url-test, policy-path=https://gist.githubusercontent.com/githubdulong/6c83f0472b3d3bb700064426e7f2ffcf/raw/tvOS, policy-regex-filter=台, update-interval=43200, no-alert=0, hidden=1, include-all-proxies=0
# 新加坡
Singapore = url-test, policy-path=https://gist.githubusercontent.com/githubdulong/6c83f0472b3d3bb700064426e7f2ffcf/raw/tvOS, policy-regex-filter=狮|新, update-interval=43200, no-alert=0, hidden=1, include-all-proxies=0
# 美国
United States = url-test, policy-path=https://gist.githubusercontent.com/githubdulong/6c83f0472b3d3bb700064426e7f2ffcf/raw/tvOS, policy-regex-filter=美, update-interval=43200, no-alert=0, hidden=1, include-all-proxies=0
# 美国
Japan = url-test, policy-path=https://gist.githubusercontent.com/githubdulong/6c83f0472b3d3bb700064426e7f2ffcf/raw/tvOS, policy-regex-filter=日, update-interval=43200, no-alert=0, hidden=1, include-all-proxies=0

[Rule]
# > 规则分流
# 通过ponte访问
IP-CIDR,192.168.0.0/16,Ponte,no-resolve
# WARP
OR,((IP-CIDR,162.159.36.1/32,no-resolve), (IP-CIDR6,2606:4700:4700::1111/128,no-resolve), (DOMAIN-SUFFIX,engage.nanocat.cloud)),WARP+
# 规则修正
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Direct/Direct.list,DIRECT
# 广告拦截
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Surge/Advertising/Advertising.list,REJECT
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Surge/Advertising/Advertising_Domain.list,REJECT
# 隐私保护
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Privacy/Privacy.list,REJECT
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Privacy/Privacy_Domain.list,REJECT
# 运营商劫持
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Hijacking/Hijacking.list,REJECT
# Netflix
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Netflix/Netflix.list,Netflix
# Disney+
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Disney/Disney.list,Disney+
# Spotify
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Spotify/Spotify.list,Spotify
# YouTube
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list,YouTube
# 全球加速
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Global/Global.list,PROXY
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Global/Global_Domain.list,PROXY
# TestFlight
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/TestFlight/TestFlight.list,PROXY
# 苹果服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple.list,Apple
# Local Area Network 局域网
RULE-SET,LAN,DIRECT
# GeoIP China
GEOIP,CN,DIRECT
# 兜底规则
FINAL,PROXY,dns-failed

[Host]
# > 本地DNS映射
*.apple.com = server:https://doh.dns.apple.com/dns-query
*.itunes.com = server:https://doh.dns.apple.com/dns-query

[MITM]
# > MITM 使用 HTTP/2 协议
tcp-connection = true
h2 = true
# > 仅 MITM 本机
client-source-address = 127.0.0.1
# > CA 证书
ca-passphrase = BBDFA278
ca-p12 = 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

[WireGuard Cloudflare]
# > WARP
private-key = iJY4jOkIW2Xabv9dgnGacBFzDX8nBhgq1yAy4Rl3H14=
self-ip = 172.16.0.2
self-ip-v6 = 2606:4700:110:88e2:2565:8c1e:649e:62c7
dns-server = 162.159.36.1, 2606:4700:4700::1111
mtu = 1280
peer = (public-key = bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=, allowed-ips = "0.0.0.0/0, ::0/0", endpoint = 162.159.192.11:1843, keepalive = 45, client-id = 166/135/201)

